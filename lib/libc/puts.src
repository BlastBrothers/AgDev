; Updated by Paul Cawte 13/06/2023
;
; Modifed to output CR/LF rather than just LF at end of line

	assume	adl=1

	section	.text
	public	_puts
_puts:
	pop	de
	ex	(sp),hl
	push	de
.loop:
	ld	a,(hl)
	or	a,a
	jr	z,.newline
	ld	e,a
	push	hl
	push	de
	call	_putchar
	pop	de
	pop	hl
	inc	hl
	jr	.loop
.newline:
	ld	l,10
	push	hl
	call	_putchar
	pop	hl
	ld 	l,13
	push	hl
	call	_putchar
	pop	hl
	ret

	extern	_putchar

